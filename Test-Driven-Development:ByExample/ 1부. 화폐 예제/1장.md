### 1장. 다중 통화를 지원하는 Money 객체
- 앞으로 어떤 일을 해야하는지 알려주고, 지금 하는 일에 집중할 수 있도로 도와주며, 언제 일이 다 끝나는지 알려줄 수 있게끔 할일 목록을 작성해보자
- 또 다른 테스트가 새악나면 할일 모로에 새로운 항목을 추가
- 코드를 짤때는 객체를 만들면서 시작하는게 아니라 테스트를 먼저 만들어야 한다. 
- 테스트를 작성할 때는 오퍼레이션의 완벽한 **인터페이스**에 대해 상상해보는 것이 좋다. 외부에서 어떤 식으로 보일지에 대해서도 생각한다.

### 곱셉의 예
```java
public void testMultiplication() {
    Dollar five = new Dollar(5);
    five.times(2);
    assertEquals(10, five.amount);
}
```
- 위 코드는 컴파일도 되지 않는다. 
  - Dollar 클래스가 없음
  - 생성자가 없음
  - times(int) 메서드가 없음
  - amount 필드가 없음
- 하나씨 정복해나간다. 

````java
Dollar.class
class Dollar

Dollar(int amount) {}

void times(int multiplier) {}

int amount;
````
- 이제 테스트를 실행해서 테스트가 실패하는 모습을 볼 수 있게 된다. 
- 이제 실패에 대한 구체적인 척도를 갖게 된 것이다. 
- 우리 문제는 '다중 통화 구현'에서 '이 테스트를 통과시킨 후 나머지 테스트들도 통과시키기'로 변형된 것이다. 
```java
Dollar.class
int amount = 10;
```
- 위 결과 초록막대를 보게 된다. 하지만 일반화가 남았다. 

### TDD 순서
1. 작은 테스트를 하나 추가한다. 
2. 모든 테스트를 실행해서 테스트가 실패하는 것을 확인한다. 
3. 조금 수정한다. 
4. 모든 테스트를 실행해서 테스트가 성공하는 것을 확인한다. 
5. 중복을 제거하기 위해 리팩토링 한다. 

### 의존성과 중복
- 문제는 테스트와 코드 사이에 존재하는 의존성이다. 즉 코드나 테스트 중 한쪽을 수정하면 반드시 다른 한쪽도 수정해야만 한다는 것이다. 
- 우리의 목표는 코드를 바꾸지 않으면서도 뭔가 의미 있는 테스트를 하나 더 작성하는 것이다. 
- 중복된 로직이란 동일한 문장이 코드의 여러 장소에 나타는 것을 의미, 하나로 끄집어 내는 일엔 객체를 이용하는 것이 최고다. 
- 다음 테스트로 진행하기 전에 중복을 제거함으로써, 오지 한 가지(one and only one)의 코드 수정을 통해 다음 테스트도 통과되게 만들 기능을 최대화하는 것
  - Once and only one : 필요한 것을 하되(once) 단 한번만(only one)하라는 뜻

```Java
Dollar.class
int amount = 5 * 2;
```
- 2와 5가 두곳에 존재하므로 중복을 제거해야한다. 객체의 초기화 단계에 있는 설정 코드를 times() 메서드로 옮기자. 
```java
Dollar.class
int amount;

void times(int multiplier) {
    amount = 5 * 2;
}
```
- TDD의 핵심은 이런 작은 단계를 밟아야한다는 것이 아니라, 이런 작은 단계를 밟을 능력을 갖추어야 한다는 것이다.

- 5를 어떻게 없앨 수 있을까
```java
Dollar.class
Dollar(int amount) {
    this.amoutn = amount;
}
void times(int multiplier) {
    amount = amount * 2;
}

-> 인자로 대체 
void times(int multiplier) {
    amount *= multiplier;
}
```

### 이 장에서 한 것들
1. 우리가 알고 있는 작업해야 할 **테스트목록**을 만들었다. 
2. **오퍼레이션이 외부에서 어떻게 보이길 원하는지** 말해주는 이야기를 코드로 표현했다. 
3. JUnit에 대한 상세한 사항들은 잠시 무시하기로 했다. 
4. **스텁 구현**을 통해 테스트를 컴파일했다. 
5. 끔찍한 죄악을 범하여 테스트를 통과시켰다. 
6. 돌아가는 코드에서 **상수를 변수로 변경**하여 점진적으로 **일반화**했다. 
7. 새로운 할일들을 한번에 처리하는 대신 할일 목록에 추가하고 넘어갔다. 